# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key_here

# Supabase Configuration
SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# 1.1.3: 环境配置
# development: 开发环境（输出详细日志）
# production: 生产环境（减少日志输出）
ENV=development

# 1.1.3: 向量数据库配置
# 1.2.56: 推荐本地环境也使用 pgvector，与生产环境保持一致
# 本地开发：USE_PGVECTOR=true（使用本地 Supabase pgvector）
# 生产环境：USE_PGVECTOR=true（使用线上 Supabase pgvector）
USE_PGVECTOR=true

# Postgres Connection String (for vecs/pgvector)
# 1.1.17: 重命名为 PGVECTOR_DATABASE_URL 避免与 Chainlit 数据持久化冲突
# Chainlit 会自动检测 DATABASE_URL 并尝试连接，如果密码含特殊字符会导致解析错误
# 
# 本地开发（连接本地 Supabase，端口参考 supabase/config.toml）：
PGVECTOR_DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54422/postgres
#
# 生产环境（连接线上 Supabase）：
# 格式: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
# 如果密码包含特殊字符，需要进行 URL 编码：
# ? -> %3F, ! -> %21, @ -> %40, # -> %23, $ -> %24, & -> %26, = -> %3D, + -> %2B, / -> %2F
# 例如：密码 "my?pass!" 应编码为 "my%3Fpass%21"
# PGVECTOR_DATABASE_URL=your_production_database_url_here

# 1.1.2: 注意
# SUPABASE_URL 和 SUPABASE_SERVICE_ROLE_KEY 用于 Chainlit 查询项目的 vector_collection
# 确保 Service Role Key 有权限访问 knowledge_bases 表

# 1.1.11: URL爬虫配置
# 爬取超时时间（毫秒），默认30秒
CRAWL_TIMEOUT=30000

# 爬取失败重试次数，默认3次
CRAWL_MAX_RETRIES=3

# 最大并发爬取数量，默认3个
CRAWL_MAX_CONCURRENT=3

# 等待网络空闲时间（毫秒），默认2秒
# 用于确保JavaScript动态内容完全加载
WAIT_NETWORK_IDLE=2000

# 1.2.12: 文档检索配置
# 最终使用的文档片段数量，默认4个
MAX_CHUNKS=4

# 检索时获取的文档数量，应该比 MAX_CHUNKS 大以便过滤错误文档，默认8个
RETRIEVE_K=8
